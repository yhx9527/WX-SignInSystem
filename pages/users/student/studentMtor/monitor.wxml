 <!--index.wxml-->
<import src="../common/mainTabCell.wxml" />

 <view class="userinfo" >
    <image class="userinfo-avatar" src="{{userInfo.avatarUrl}}" background-size="cover"></image>
    
      <text class="member">{{person.xingming}}</text>
      <text class="member">{{person.xuehao}}</text>
    
    <view class="userinfo-work"wx:if="{{person.userPermit[1]==1}}">
      <text class="work"bindtap="point">信用分:{{points}}</text>
      <view class="cut-line2"></view>
      <text class="work"bindtap="leaveNumber">请假次数:{{leaveNum}}</text>
    </view>
    <view class="userinfo-work"style="margin-bottom:5px">
      <text class="work">简介:{{person.memberInfo}}</text>
    </view>  
</view>

<view class="top-tab"wx:if="{{person.userPermit[1]==1}}">
  <view class="top-tab-item {{currentTopItem==idx ? 'active' : ''}}" wx:for="{{topTabItems}}" wx:for-index="idx" data-idx="{{idx}}" bindtap="switchTab">
    {{item}}
  </view>
</view>
<swiper class="swiper" current="{{currentTopItem}}" bindchange="bindChange" duration="300" style="height:{{swiperHeight}}px" wx:if="{{person.userPermit[1]==1}}">

  <!--督导课堂-->
  <swiper-item>
    <scroll-view class="scrollView" scroll-y="true" bindscrolltolower="loadMoreData" >
      <view class="hengfu">
        <text class="fa fa-pencil-square-o fa-lg"style='color:#333333;margin-left:5px;'></text>
        <text class="hengfuText">正在督导</text>
      </view>
        <view style="height:12rpx;background-color:#eaeaea"></view>
          <view class="item-view "bindtap="monitorCourse" data-courseID="{{item.id}}"data-courseName="{{item.courseName}}"data-courseTeacher="{{item.courseTeacher}}"data-courseTime="{{item.courseTime}}"data-coursePlace="{{item.coursePlace}}"data-suvId="{{item.suvId}}"data-schId="{{item.schedule.schId}}"data-suvWeek="{{item.suvWeek}}"data-suvMan="{{item.suvMan}}"data-ifinsert="{{item.ifInsert}}"data-xingming="{{item.student.userName}}"data-iconcolor="#FFCC99">
               <template is="mainTabCell" data="{{item}}" />
              
          </view>
        
      <view class="hengfu">
        <text class="fa fa-eye fa-lg"style='color:#333333;margin-left:5px;'></text>
        <text class="hengfuText">全部督导</text>
      </view>
      <view wx:if="{{allDataList.length==0}}"class="tab-content1" >
        <view class="fa fa-commenting fa-5x"style='color:#999999'></view>
        <!--image class="tab-image" src="../../../image/hasMessage.png"mode="aspectFit"></image-->
        <text style='color:#999;margin-top:10px;font-size:18px;'>暂无信息</text>
      </view>
      <view style="height:12rpx;background-color:#eaeaea"></view>
      
      <view class="item-view " wx:for="{{allDataList}}"  wx:for-item="item"bindtap="monitorCourse" data-ArrayFlag="{{item.ArrayFlag}}"data-courseID="{{item.id}}"data-courseName="{{item.courseName}}"data-courseTeacher="{{item.courseTeacher}}"data-courseTime="{{item.courseTime}}"data-coursePlace="{{item.coursePlace}}"data-suvId="{{item.suvId}}"data-schId="{{item.schedule.schId}}"data-suvWeek="{{item.suvWeek}}"data-suvMan="{{item.suvMan}}"data-xingming="{{item.student.userName}}"data-ifinsert="{{item.ifInsert}}"data-iconcolor="{{item.iconColor}}">
      
        
          <template is="mainTabCell" data="{{item}}" />
          
       
      </view>
      <view style="height:12rpx;background-color:#eaeaea"></view>
    </scroll-view>
  </swiper-item>

  <!--历史记录-->
  <swiper-item>
  <view wx:if="{{historyDataList.length==0}}"class="tab-content1" >
        <view class="fa fa-commenting fa-5x"style='color:#999999'></view>
        <!--image class="tab-image" src="../../../image/hasMessage.png"mode="aspectFit"></image-->
        <text style='color:#999;margin-top:10px;font-size:18px;'>暂无信息</text>
      </view>
    <scroll-view class="scrollView" scroll-y="true" bindscrolltolower="loadMoreData" bindscrolltoupper="refreshData" >
      
      <view style="height:12rpx;background-color:#eaeaea"></view>
      
      <view class="item-view" wx:for="{{historyDataList}}"  wx:for-item="item"wx:for-index="yhxIdx"bindtap="historyCourse"data-courseID="{{item.id}}"data-courseName="{{item.courseName}}"data-courseTeacher="{{item.courseTeacher}}"data-courseTime="{{item.courseTime}}"data-coursePlace="{{item.coursePlace}}"data-suvRecord="{{item.suvRecord}}"data-iconcolor="{{iconBackColor[yhxIdx%10]}}">
      
        <view class="weui-media-box weui-media-box_appmsg"style='padding:6px;'hover-class="weui-cell_active">                        
            <view class="weui-media-box__hd weui-media-box__hd_in-appmsg;"style='background-color:{{iconBackColor[yhxIdx%10]}}'>
              <view class="fa fa-star fa-2x"style='vertical-align:middle;color:#FFFFFF'></view>
            </view>
            <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
            <view class="weui-media-box__title">{{item.courseName}}</view>
            <view class="weui-media-box__desc">老师：{{item.courseTeacher}}</view>
            <view class="weui-media-box__desc">时间：{{item.courseTime}}</view>
            <view class="weui-media-box__desc">地点：{{item.coursePlace}}</view>
            </view>
            <view class="remind">
              <text class="remindText"style="margin-bottom:5px;">完成</text>
              <text class="remindText"style="margin-top:5px;">督导</text>
            </view>
        </view>        
      </view>
      <view style="height:12rpx;background-color:#eaeaea"></view>
    </scroll-view>
  </swiper-item>

  <!--审核请假-->
  <swiper-item>
  <view wx:if="{{leaveDataList.length==0}}"class="tab-content1" >
        <view class="fa fa-commenting fa-5x"style='color:#999999'></view>
        <!--image class="tab-image" src="../../../image/hasMessage.png"mode="aspectFit"></image-->
        <text style='color:#999;margin-top:10px;font-size:18px;'>暂无信息</text>
      </view>
    <scroll-view class="scrollView" scroll-y="true" bindscrolltolower="loadMoreData" bindscrolltoupper="refreshData">
      
      <view style="height:12rpx;background-color:#eaeaea"></view>

      <view class="item-view" wx:for="{{leaveDataList}}"  wx:for-item="item"wx:for-index="yhxIdx"bindtap="McheckLeave"data-coursename="{{item.courseName}}"data-signinres="{{item.signInRes}}"data-siid="{{item.id}}">
      
        <view class="weui-media-box weui-media-box_appmsg"style='padding:6px;'>                        
          <view class="weui-media-box__hd weui-media-box__hd_in-appmsg"style='background-color:{{iconBackColor[yhxIdx%10]}}'>
            <view class="fa fa-file fa-2x"style='vertical-align:middle;color:#FFFFFF'></view>
          </view>
          <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
            <view class="weui-media-box__title">{{item.courseName}}</view>
            <view class="weui-media-box__desc">请假学生姓名：{{item.courseStudent}}</view>
            <view class="weui-media-box__desc">请假学生学号：{{item.courseXuehao}}</view>
            <view class="weui-media-box__desc">时间：{{item.courseTime}}</view>
          </view>
            <!--
            <view class="remindbtn">
             <button class="remindTextbtn1"bindtap="noLeave"data-signinres="{{item.signInRes}}"data-index="{{item.index}}"style="background-color:#FF8C00">驳回</button>
              <button class="remindTextbtn1"bindtap="yesLeave"data-signinres="{{item.signInRes}}"data-index="{{item.index}}">通过</button>
              
            
            </view>
            -->
          <view class="shuzhe"wx:if="{{item.signInRes.siApprove==0}}">未审核</view>
          <view class="shuzhe"wx:if="{{item.signInRes.siApprove==1}}">已通过</view>
          <view class="shuzhe"wx:if="{{item.signInRes.siApprove==2}}">已驳回</view>
        </view>
      </view>
      <view style="height:12rpx;background-color:#eaeaea"></view>
    </scroll-view>
  </swiper-item>

  <!--督导池-->
  <swiper-item>
  <view wx:if="{{giveDataList.length==0}}"class="tab-content1" >
        <view class="fa fa-commenting fa-5x"style='color:#999999'></view>
        <!--image class="tab-image" src="../../../image/hasMessage.png"mode="aspectFit"></image-->
        <text style='color:#999;margin-top:10px;font-size:18px;'>暂无信息</text>
      </view>
    <scroll-view class="scrollView" scroll-y="true" bindscrolltolower="loadMoreData" bindscrolltoupper="refreshData">
      
      <view style="height:12rpx;background-color:#eaeaea"></view>
      
      <view class="item-view" wx:for="{{giveDataList}}"  wx:for-item="item"wx:for-index="yhxIdx">
        <view class="weui-media-box weui-media-box_appmsg"style='padding:6px;'>
                                
          <view class="weui-media-box__hd weui-media-box__hd_in-appmsg"style='background-color:{{iconBackColor[yhxIdx%10]}}'>
            <view class="fa fa-tag fa-2x"style='vertical-align:middle;color:#FFFFFF'></view>
          </view>
          <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
            <view class="weui-media-box__title">{{item.courseName}}</view>
            <view class="weui-media-box__desc">老师：{{item.courseTeacher}}</view>
            <view class="weui-media-box__desc">时间：{{item.courseTime}}</view>
            <view class="weui-media-box__desc">地点：{{item.coursePlace}}</view>
          </view>
          <view class="remindbtn">   
            <button class="remindTextbtn"hover-class="remindTextbtnA"bindtap="receive"data-suvSch="{{item.suvSch}}"data-index="{{item.index}}">领取</button>
          </view>
        </view>
      </view>
      <view style="height:12rpx;background-color:#eaeaea"></view>
    </scroll-view>
  </swiper-item>
  <!--督导转接-->
  <swiper-item>
  <view wx:if="{{transDataList.length==0}}"class="tab-content1" >
        <view class="fa fa-commenting fa-5x"style='color:#999999'></view>
        <!--image class="tab-image" src="../../../image/hasMessage.png"mode="aspectFit"></image-->
        <text style='color:#999;margin-top:10px;font-size:18px;'>暂无信息</text>
      </view>
    <scroll-view class="scrollView" scroll-y="true" bindscrolltolower="loadMoreData" bindscrolltoupper="refreshData">
      
      <view style="height:12rpx;background-color:#eaeaea"></view>
      
      <view class="item-view" wx:for="{{transDataList}}"  wx:for-item="item"wx:for-index="yhxIdx">
        <view class="weui-media-box weui-media-box_appmsg"style='padding:6px;'>
                                
          <view class="weui-media-box__hd weui-media-box__hd_in-appmsg"style='background-color:{{iconBackColor[yhxIdx%10]}}'>
            <view class="fa fa-handshake-o fa-2x"style='vertical-align:middle;color:#FFFFFF'></view>
          </view>
          <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
            <view class="weui-media-box__title">课程名:{{item.courseName}}</view>
            <view class="weui-media-box__desc">时间：{{item.courseTime}}</view>
            <view class="weui-media-box__desc">地点：{{item.coursePlace}}</view>
            <view class="weui-media-box__desc"style="white-space:nowrap">发起人：{{item.faqiren}}</view>
          </view>
          <view wx:if="{{!item.ifyes&&!item.ifno}}"class="remindbtn"style="margin-right:0;">
            <button class="remindTextbtn2"hover-class="remindTextbtn1A"bindtap="rejectTrans"data-suvtrans="{{item.suvTrans}}"data-index="{{item.index}}">拒绝</button>
            <button class="remindTextbtn1"hover-class="approve"bindtap="receiveTrans"data-suvtrans="{{item.suvTrans}}"data-index="{{item.index}}">接受</button>  
          </view>
          <view wx:if="{{!item.ifyes&&item.ifno}}"class="shuzhe">已拒绝</view>
          <view wx:if="{{item.ifyes&&!item.ifno}}"class="shuzhe">已接受</view>
        </view>
      </view>
      <view style="height:12rpx;background-color:#eaeaea"></view>
    </scroll-view>
  </swiper-item>
</swiper>
<modal hidden="{{ifTransWork}}"title="转接该课程"confirm-text="确认"cancel-text="取消"bindcancel="cancelTrans"bindconfirm="confirmTrans">
    <input type="number"placeholder="请输入接受转接的学生学号"bindinput="confirmTransInput"></input>
  </modal>

